<div class="container">
    <div class="header">
        <h1>แบบฟอร์มยื่นอุทธรณ์ผลประเมิน</h1>
        <p>สำหรับกรณีที่ท่านเห็นว่าผลการประเมินไม่เป็นธรรมหรือไม่ถูกต้อง</p>
    </div>
    
    <div class="tabs">
        <div class="tab active" [ngClass]="{ 'active': activeTab === 'new-appeal' }" (click)="setTab('new-appeal')" data-tab="new-appeal">ยื่นอุทธรณ์ผลประเมิน</div>
        <div class="tab" [ngClass]="{ 'active': activeTab === 'appeal-history' }" (click)="setTab('appeal-history')" data-tab="appeal-history">ประวัติการอุทธรณ์</div>
    </div>
    
    <div *ngIf="activeTab === 'new-appeal'" class="tab-content">
        <div id="new-appeal" class="tab-content active">
            <div class="info-box">
                <h3>ข้อควรทราบก่อนยื่นอุทธรณ์</h3>
                <ul>
                    <li>การยื่นอุทธรณ์ต้องดำเนินการภายใน 15 วันนับจากวันที่ได้รับแจ้งผลการประเมิน</li>
                    <li>กรุณาแนบหลักฐานที่เกี่ยวข้องเพื่อประกอบการพิจารณา</li>
                    <li>คำอุทธรณ์ควรมีเหตุผลชัดเจนและระบุประเด็นที่ต้องการให้ทบทวน</li>
                    <li>การพิจารณาคำอุทธรณ์จะใช้เวลาประมาณ 30 วันทำการ</li>
                </ul>
            </div>
            
            <form id="appealForm" method="" action="">
                <div class="form-row">
                    <div class="form-column">
                        <div class="form-group">
                            <label for="fullName" class="required">ชื่อ-นามสกุล</label>
                            <input type="text" id="fullName" name="fullName" required>
                        </div>
                    </div>
                    
                    <div class="form-column">
                        <div class="form-group">
                            <label for="position">ตำแหน่ง</label>
                            <input type="text" id="position" name="position">
                        </div>
                    </div>
                </div>
                
                <div class="form-row">              
                    <div class="form-column">
                        <div class="form-group">
                            <label for="department" class="required">แผนก/ฝ่าย/คณะ</label>
                            <input type="text" id="department" name="department" required>
                        </div>
                    </div>
                                    
                    <div class="form-column">
                        <div class="form-group">
                            <label for="contact" class="required">ข้อมูลติดต่อ</label>
                            <input placeholder="เบอร์โทรศัพท์หรืออีเมล" type="text" id="contact" name="contact" required>
                        </div>
                    </div>
                </div>
                
                <h3 style="color: #a67c00; margin-top: 30px;">รายละเอียดการประเมิน</h3>
                
                <div class="form-row">
                    <div class="form-column">
                        <div class="form-group">
                            <label for="evaluationPeriod" class="required">รอบการประเมิน</label>
                            <select id="evaluationPeriod" name="evaluationPeriod" required>
                                <option value="">-- โปรดเลือก --</option>
                                <option value="2025-1">แบบ ป-ว 01 (รอบที่ 1 วันที่ 1 - 31 ตุลาคม 2024)</option>
                                <option value="2025-1">แบบ ป-ว 02 (รอบที่ 1 วันที่ 1 ตุลาคม - 31 มีนาคม 2025)</option>
                                <option value="2024-2">แบบ ป-ว 02 (รอบที่ 2 วันที่ 1 เมษายน - 30 กันยายน 2025)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-column">
                        <div class="form-group">
                            <label for="evaluator" class="required">ชื่อผู้ประเมิน/หัวหน้างาน</label>
                            <input type="text" id="evaluator" name="evaluator" required>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-column">
                        <div class="form-group">
                            <label for="evaluationDate" class="required">วันที่ได้รับแจ้งผลการประเมิน</label>
                            <input type="date" id="evaluationDate" name="evaluationDate" required>
                        </div>
                    </div>
                    
                    <div class="form-column">
                        <div class="form-group">
                            <label for="evaluationType" class="required">ประเภทการประเมิน</label>
                            <select id="evaluationType" name="evaluationType" required>
                                <option value="">-- โปรดเลือก --</option>
                                <option value="performance">การประเมินผลการปฏิบัติงาน</option>
                                <option value="promotion">การประเมินเพื่อเลื่อนตำแหน่ง</option>
                                <option value="probation">การประเมินทดลองงาน</option>
                                <option value="competency">การประเมินสมรรถนะ</option>
                                <option value="other">อื่นๆ</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="evaluation-details">
                    <h3 style="margin-top: 0; color: #704e00;">ผลการประเมินที่ได้รับ</h3>
                    
                    <div class="form-row">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="currentScore" class="required">คะแนนที่ได้รับการประเมิน</label>
                                <input type="number" id="currentScore" name="currentScore" min="0" max="100" step="1" required>
                                <p class="note">กรอกเป็นตัวเลข เช่น 65</p>
                            </div>
                        </div>
                        
                        <div class="form-column">
                            <div class="form-group">
                                <label for="currentGrade" class="required">ระดับที่ได้รับ</label>
                                <select id="currentGrade" name="currentGrade" required>
                                    <option value="">-- โปรดเลือก --</option>
                                    <option value="A">ระดับดีเด่น</option>
                                    <option value="B">ระดับดีมาก</option>
                                    <option value="C">ระดับดี</option>
                                    <option value="D">ระดับพอใช้</option>
                                    <option value="F">ระดับต้องปรับปรุง</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="expectedScore">คะแนนที่คาดว่าควรได้รับ</label>
                                <input type="number" id="expectedScore" name="expectedScore" min="0" max="100" step="0.01">
                            </div>
                        </div>
                        
                        <div class="form-column">
                            <div class="form-group">
                                <label for="expectedGrade">ระดับที่คาดว่าควรได้รับ</label>
                                <select id="expectedGrade" name="expectedGrade">
                                    <option value="">-- โปรดเลือก --</option>
                                    <option value="A">ระดับดีเด่น</option>
                                    <option value="B">ระดับดีมาก</option>
                                    <option value="C">ระดับดี</option>
                                    <option value="D">ระดับพอใช้</option>
                                    <option value="F">ระดับต้องปรับปรุง</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="appealItems" class="required">หัวข้อการประเมินที่ต้องการอุทธรณ์</label>
                    <select id="appealItems" name="appealItems" multiple size="4" required>
                        <option value="kpi">ผลสัมฤทธิ์ของงาน (KPI)</option>
                        <option value="behavior">พฤติกรรมการปฏิบัติงาน</option>
                        <option value="competency">สมรรถนะหลัก/สมรรถนะเฉพาะ</option>
                        <option value="discipline">วินัยและจรรยาบรรณ</option>
                        <option value="leadership">ภาวะผู้นำ</option>
                        <option value="teamwork">การทำงานเป็นทีม</option>
                        <option value="innovation">ความคิดสร้างสรรค์และนวัตกรรม</option>
                        <option value="other">อื่นๆ</option>
                    </select>
                    <p class="note">สามารถเลือกได้หลายข้อ (กด Ctrl ค้างไว้เพื่อเลือกหลายรายการ)</p>
                </div>
                
                <div class="form-group">
                    <label for="appealReason" class="required">เหตุผลในการยื่นอุทธรณ์</label>
                    <textarea id="appealReason" name="appealReason" required></textarea>
                    <p class="note">โปรดระบุรายละเอียดพร้อมเหตุผลประกอบให้ชัดเจนว่าเหตุใดจึงคิดว่าผลการประเมินไม่เป็นธรรม</p>
                </div>
                
                <div class="form-group">
                    <label for="supportingEvidence" class="required">ข้อมูลและหลักฐานสนับสนุน</label>
                    <textarea id="supportingEvidence" name="supportingEvidence" required></textarea>
                    <p class="note">ระบุข้อมูลเชิงประจักษ์ ผลงาน หรือเหตุการณ์ที่แสดงให้เห็นว่าท่านสมควรได้รับการประเมินที่ดีกว่า</p>
                </div>
                
                <div class="info-box">
                    <h3>เอกสารที่ต้องแนบประกอบการอุทธรณ์</h3>
                    <ul>
                        <li>หนังสืออุทธรณ์</li>
                        <li>แบบ ปว-01, ปว-02, ปว-04</li>
                        <li>บันทึกการปฏิบัติงาน รายงาน รูป หรือผลสัมฤทธิ์ของงานที่เกี่ยวข้อง</li>
                        <li>เอกสารอื่นๆ ที่เกี่ยวข้องและเป็นประโยชน์ต่อการพิจารณา</li>
                    </ul>
                </div>
                
                <div class="form-group">
                    <label for="documents" class="required">แนบเอกสาร</label>
                    <div class="file-upload">
                        <label class="file-upload-label">
                            <input type="file" (change)="onFileSelected($event)" id="documents" name="documents" multiple required>
                            เลือกไฟล์
                        </label>

                        <div class="file-preview-container" *ngIf="selectedFiles.length > 0">
                            <div class="file-preview" *ngFor="let file of selectedFiles; let i = index">
                                <div class="file-name">{{ file.name }}</div>
                                <button type="button" class="remove-btn" (click)="removeFile(i)">✖</button>
                            </div>
                        </div>
                        <p *ngIf="selectedFiles.length === 0" class="text-muted">ยังไม่ได้เลือกไฟล์</p>
                    </div>
                    <p class="note">รองรับไฟล์ PDF, JPG, PNG, JPEG ขนาดไม่เกิน 10MB ต่อไฟล์</p>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" required>
                        <span class="required sarabun-regular px-2">ข้าพเจ้าขอรับรองว่าข้อมูลที่กรอกและเอกสารที่แนบมาทั้งหมดเป็นความจริงทุกประการ</span>
                    </label>
                </div>
                
                <div class="submit-section">
                    <button type="submit" class="btn-submit">ยืนยันการยื่นอุทธรณ์</button>
                </div>
            </form>
        </div>
    </div>
    
    <div *ngIf="activeTab === 'appeal-history'" class="tab-content">
        <div id="appeal-history" class="tab-content">
            <div class="form-group">
                <label for="searchID">ค้นหาประวัติการอุทธรณ์</label>
                <div class="form-row">
                    <div class="form-column" style="flex: 2;">
                        <input type="text" id="searchID" name="searchID" placeholder="กรอกเลขประจำตัวหรือเลขอ้างอิงการอุทธรณ์">
                    </div>
                    <div class="form-column" style="flex: 1;">
                        <button type="button" class="btn btn-warning text-white fw-bold" style="padding: 12px;"><i class="fa-solid fa-magnifying-glass px-1 text-white"></i>ค้นหา</button>
                    </div>
                </div>
            </div>
            
            <div class="table-responsive">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>เลขที่อุทธรณ์</th>
                            <th>วันที่ยื่น</th>
                            <th>รอบการประเมิน</th>
                            <th>สถานะ</th>
                            <th>การดำเนินการ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EVA25041800123</td>
                            <td>18/04/2025</td>
                            <td>1/2025</td>
                            <td><span class="status-badge status-reviewing">อยู่ระหว่างการพิจารณา</span></td>
                            <td><a href="#" class="view-details">ดูรายละเอียด</a></td>
                        </tr>
                        <tr>
                            <td>EVA24102500089</td>
                            <td>25/10/2024</td>
                            <td>2/2024</td>
                            <td><span class="status-badge status-approved">อนุมัติ</span></td>
                            <td><a href="#" class="view-details">ดูรายละเอียด</a></td>
                        </tr>
                        <tr>
                            <td>EVA24052100045</td>
                            <td>21/05/2024</td>
                            <td>1/2024</td>
                            <td><span class="status-badge status-rejected">ไม่อนุมัติ</span></td>
                            <td><a href="#" class="view-details">ดูรายละเอียด</a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>หากมีข้อสงสัยเพิ่มเติม กรุณาติดต่อฝ่ายทรัพยากรบุคคล โทร. 02-xxx-xxxx ต่อ 1234</p>
        <p>&copy; 2025 ระบบอุทธรณ์ผลการประเมิน</p>
    </div>